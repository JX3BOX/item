(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24402e67"],{1829:function(t,s,e){"use strict";var a=e("5644"),i=e.n(a);i.a},"19cb":function(t,s,e){},5644:function(t,s,e){},"99c6":function(t,s,e){"use strict";var a=e("b42c"),i=e.n(a);i.a},b42c:function(t,s,e){},c67a:function(t,s,e){"use strict";var a=e("19cb"),i=e.n(a);i.a},c84b:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"m-item-index",attrs:{id:"m-item-view"}},[t.item&&"{}"!==JSON.stringify(t.item)?e("el-row",{staticClass:"m-item"},[e("el-col",{staticClass:"m-name",attrs:{xs:24,md:3}},[e("img",{staticClass:"u-icon",attrs:{src:t.$options.filters.icon_url(t.item.IconID)}}),e("h6",{staticClass:"u-name",class:{white:1==t.item.Quality},style:{color:t.$options.filters.item_color(t.item.Quality)},domProps:{textContent:t._s(t.item.Name)}})]),e("el-col",{attrs:{xs:24,md:21}},[e("el-row",{staticClass:"m-fields"},[t.item.DescHtml?e("el-col",{staticClass:"m-field",attrs:{xs:24,md:24}},[e("span",{staticClass:"u-value u-intro",domProps:{innerHTML:t._s(t.item.DescHtml)}}),e("hr",{staticClass:"u-hr"})]):t._e(),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("回购价格：")]),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.$options.filters.item_price(t.item.Price))}})]),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("品质等级：")]),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.Level)}})]),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("绑定类型：")]),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.$options.filters.item_bind(t.item.BindType))}})]),t.item.Require1Type?e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title",domProps:{textContent:t._s(t.$options.filters.item_require_1_type(t.item.Require1Type)+"：")}}),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.Require1Value)}})]):t._e(),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("耐久度：")]),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.MaxDurability+"/"+t.item.MaxDurability)}})]),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("存放时间：")]),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.MaxExistTime)}})]),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("最大拥有数：")]),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.MaxExistAmount?t.item.MaxExistAmount:"无限制")}})]),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("能否交易：")]),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.CanTrade?"✔️":"❌")}})]),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("能否丢弃：")]),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.CanDestroy||null===t.item.CanDestroy?"✔️":"❌")}})]),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("品质：")]),e("span",{staticClass:"u-value",style:{color:t.$options.filters.item_color(t.item.Quality)},domProps:{textContent:t._s(t.$options.filters.item_quality(t.item.Quality))}})]),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("适用门派：")]),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.BelongSchool)}})]),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("心法：")]),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.MagicKind)}})]),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("属性：")]),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.MagicType)}})]),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("获得途径：")]),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.GetType)}})]),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("能否改色：")]),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.CanSetColor?"✔️":"❌")}})]),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("阵营：")]),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.$options.filters.item_require_camp(t.item.RequireCamp))}})]),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("能否分解：")]),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.CanApart?"✔️":"❌")}})]),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("能否收集：")]),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.CanExterior?"✔️":"❌")}})]),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("能否附魔：")]),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.CanChangeMagic?"✔️":"❌")}})]),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("能否共享：")]),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.CanShared?"✔️":"❌")}})]),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("PVE装备：")]),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.IsPVEEquip?"✔️":"❌")}})]),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("能否堆叠：")]),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.CanStack?"✔️":"❌")}})]),e("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[e("label",{staticClass:"u-title"},[t._v("能否消耗：")]),e("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.CanConsume?"✔️":"❌")}})])],1)],1)],1):t._e(),t.post&&"{}"===JSON.stringify(t.post)?e("div",{staticClass:"m-cj-post-null"},[e("i",{staticClass:"el-icon-s-opportunity"}),e("span",[t._v("暂无攻略，我要")]),e("a",{staticClass:"s-link",attrs:{href:t.publish_url("item/"+t.item.UiID)}},[t._v("完善攻略")])]):t._e(),t.post&&"{}"!==JSON.stringify(t.post)?e("div",{staticClass:"m-archive-list"},[e("div",{staticClass:"m-module m-cj-post"},[e("div",{staticClass:"u-head"},[e("a",{staticClass:"el-button el-button--primary u-publish s-link",attrs:{href:t.publish_url("item/"+t.item.UiID)}},[e("i",{staticClass:"el-icon-edit"}),e("span",[t._v("完善物品攻略")])]),e("h4",{staticClass:"u-title"},[e("svg",{class:"u-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"512",height:"512",viewBox:"0 0 512 512","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("path",{attrs:{d:"M382.5 109.2C345.1 71.8 296.3 50 243.9 47v110.9c46.7 19.2 79.6 65.2 79.6 118.7 0 58-47.2 105.2-105.2 105.2-47.8 0-86.6-38.9-86.6-86.6 0-39.6 32.2-71.8 71.8-71.8 33.1 0 59.9 26.9 59.9 59.9h-25c0-19.3-15.7-34.9-34.9-34.9-25.8 0-46.8 21-46.8 46.8 0 34 27.6 61.6 61.6 61.6 44.2 0 80.1-35.9 80.1-80.1 0-57-46.3-103.3-103.3-103.3C122.3 173.3 63 232.6 63 305.6 63 398.4 138.5 474 231.4 474c57.1 0 110.7-22.2 151.1-62.6 40.4-40.4 62.6-94 62.6-151.1s-22.2-110.7-62.6-151.1z"}})]),e("span",[t._v("物品攻略")])])]),e("div",{staticClass:"u-body"},[e("div",{staticClass:"content m-single-primary"},[e("Article",{attrs:{content:t.post.content}})],1),e("div",{staticClass:"other"},[t.post.user_avatar?e("div",{staticClass:"avatar"},[e("img",{attrs:{src:t.post.user_avatar}})]):t._e(),e("div",{staticClass:"done",domProps:{textContent:t._s(t.post.user_nickname)}}),e("div",{staticClass:"updated",domProps:{textContent:t._s("最后编辑于 "+t.$options.filters.date_format(t.post.updated))}}),e("a",{staticClass:"comment",attrs:{href:"javascript:void(0)"},domProps:{textContent:t._s("前往评论")},on:{click:t.go_to_comment}}),e("div",{staticClass:"remark"},[t._v(" 可通过评论通知原贡献者进行更改与署名补充 ")])])])]),e("div",{staticClass:"m-module m-cj-revisions"},[t._m(0),e("div",{staticClass:"u-body"},[e("Revisions",{attrs:{item_id:t.item.UiID}})],1)]),e("div",{staticClass:"m-module m-cj-comments"},[t._m(1),e("div",{staticClass:"u-body"},[e("Comments",{attrs:{item_id:t.item.UiID}})],1)])]):t._e(),e("ins",{staticClass:"adsbygoogle",staticStyle:{display:"block","max-width":"100%",overflow:"hidden",margin:"10px"},attrs:{"data-ad-client":"ca-pub-4388499329141185","data-ad-slot":"1787190081","data-ad-format":"auto","data-full-width-responsive":"true"}})],1)},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"u-head"},[e("h4",{staticClass:"u-title"},[t._v("📄 历史版本")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"u-head"},[e("h4",{staticClass:"u-title"},[t._v("💖 评论")])])}],n=(e("99af"),function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"m-revisions"},[e("div",{staticStyle:{padding:"5px 0","text-align":"center"}},[null===t.versions?e("span",[t._v("Loading...")]):t._e(),!1===t.versions?e("span",[t._v("⚠️ 数据加载异常")]):t._e(),t.versions&&!t.versions.length?e("span",[t._v("💧 暂无数据")]):t._e()]),t.versions&&t.versions.length?e("table",{attrs:{id:"histories"}},[t._m(0),t._l(t.versions,(function(s,a){return e("tr",{key:a,staticClass:"history"},[e("td",[e("router-link",{attrs:{to:{name:"view",params:{item_id:s.item_id,post_id:s.id}}},domProps:{textContent:t._s("v"+(t.versions.length-a))}})],1),e("td",[t._v(t._s(t._f("date_format")(s.updated)))]),e("td",{domProps:{textContent:t._s(s.user_nickname)}}),e("td",{domProps:{textContent:t._s(s.remark)}})])}))],2):t._e()])}),l=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("tr",[e("th",[t._v("版本")]),e("th",[t._v("更新时间")]),e("th",[t._v("贡献者")]),e("th",[t._v("修订说明")])])}],o=e("ee8f"),r=o.JX3BOX,c={name:"Revision",props:["item_id"],data:function(){return{versions:null}},computed:{},methods:{getVersions:function(){var t=this;this.$http({method:"GET",url:"".concat(r.__helperUrl,"api/wiki/post/versions"),headers:{Accept:"application/prs.helper.v2+json"},params:{type:"item",source_id:this.item_id},withCredentials:!0}).then((function(s){s=s.data,200===s.code&&(t.versions=s.data.versions)}),(function(){t.versions=!1}))}},mounted:function(){},watch:{item_id:{immediate:!0,handler:function(){this.item_id&&this.getVersions()}}}},m=c,u=(e("c67a"),e("2877")),p=Object(u["a"])(m,n,l,!1,null,null,null),d=p.exports,_=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"m-comments"},[e("div",{staticStyle:{padding:"5px 0","text-align":"center"}},[null===t.comments?e("span",[t._v("Loading...")]):t._e(),!1===t.comments?e("span",[t._v("⚠️ 数据加载异常")]):t._e(),t.comments&&!t.comments.length?e("span",[t._v("💧 暂无评论")]):t._e()]),e("Comment",{attrs:{comments:t.comments,item_id:t.item_id}}),e("div",{staticClass:"m-reply-form",attrs:{id:"m-reply-form"}},[e("h4",{staticClass:"u-title"},[t._v("📰 回复")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reply_form.content,expression:"reply_form.content"}],staticClass:"u-reply-content",staticStyle:{resize:"vertical"},domProps:{value:t.reply_form.content},on:{input:function(s){s.target.composing||t.$set(t.reply_form,"content",s.target.value)}}}),e("div",{staticClass:"u-author"},[e("span",[t._v("作者 : ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.reply_form.user_nickname,expression:"reply_form.user_nickname"}],attrs:{type:"text"},domProps:{value:t.reply_form.user_nickname},on:{input:function(s){s.target.composing||t.$set(t.reply_form,"user_nickname",s.target.value)}}})]),e("button",{staticClass:"u-submit",on:{click:function(s){return t.create_comment(t.reply_form)}}},[t._v(" 📝️ 提交 ")])])],1)},C=[],v=(e("b0c0"),e("d3b7"),function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",{staticClass:"comments"},t._l(t.comments,(function(s,a){return e("li",{key:a,staticClass:"c-comment"},[e("div",{staticClass:"comment"},[e("div",{staticClass:"m-nickname"},[e("span",{staticClass:"u-nickname",domProps:{textContent:t._s(s.user_nickname)}}),s.parent_id?[e("span",[t._v(" 回复 ")]),e("span",{staticClass:"u-nickname",domProps:{textContent:t._s(s.parent.user_nickname)}})]:t._e()],2),e("p",{staticClass:"u-content",domProps:{innerHTML:t._s(s.content)}}),e("div",{staticClass:"m-reply"},[e("button",{staticClass:"u-reply",class:{show:s.reply_form.show},domProps:{textContent:t._s(s.reply_form.show?"收起 ↩":"💬 回复")},on:{click:function(t){s.reply_form.show=!s.reply_form.show}}}),e("span",{staticClass:"u-time"},[t._v(t._s(t._f("date_format")(s.updated)))])]),s.reply_form.show?e("div",{staticClass:"m-reply-form"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:s.reply_form.content,expression:"comment.reply_form.content"}],staticClass:"u-reply-content",staticStyle:{resize:"vertical"},domProps:{value:s.reply_form.content},on:{input:function(e){e.target.composing||t.$set(s.reply_form,"content",e.target.value)}}}),e("div",{staticClass:"u-author"},[e("span",[t._v("作者 : ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:s.reply_form.user_nickname,expression:"comment.reply_form.user_nickname"}],attrs:{type:"text"},domProps:{value:s.reply_form.user_nickname},on:{input:function(e){e.target.composing||t.$set(s.reply_form,"user_nickname",e.target.value)}}})]),e("button",{staticClass:"u-submit",on:{click:function(e){return t.create_comment(s.reply_form,s.id)}}},[t._v(" ✔️ 提交 ")])]):t._e()]),s.children.length?e("Comment",{attrs:{comments:s.children,item_id:t.item_id}}):t._e()],1)})),0)}),f=[],h={name:"Comment",props:["comments","item_id"],methods:{create_comment:function(t,s){this.$parent.create_comment(t,s)}}},x=h,y=Object(u["a"])(x,v,f,!1,null,null,null),b=y.exports,g=e("ee8f"),w=g.JX3BOX,P=g.User,k=e("4328"),$={name:"Comments",props:["item_id"],data:function(){return{comments:null,reply_form:{content:"",user_nickname:P.getInfo().name}}},computed:{},methods:{get_comments:function(){var t=this;this.$http({method:"GET",url:"".concat(w.__helperUrl,"api/wiki/comments"),headers:{Accept:"application/prs.helper.v2+json"},params:{type:"item",source_id:this.item_id},withCredentials:!0}).then((function(s){if(s=s.data,200===s.code){for(var e=s.data.comments,a=0;a<e.length;a++)e[a]["reply_form"]={show:!1,content:"",user_nickname:P.getInfo().name};t.comments=j(e,0)}}),(function(){t.comments=!1}))},create_comment:function(t,s){"undefined"===typeof s&&(s=0),t.content?this.$http({method:"POST",url:"".concat(w.__helperUrl,"api/wiki/comment"),headers:{Accept:"application/prs.helper.v2+json"},crossDomain:!0,data:k.stringify({comment:{type:"item",source_id:this.item_id,parent_id:s,user_nickname:t.user_nickname||P.getInfo().name,content:t.content}}),withCredentials:!0}).then((function(s){s=s.data,200===s.code?(t.content="",alert("✔️ 提交成功,请等待审核")):alert("⚠️ ".concat(s.message))})).catch((function(t){alert("⚠️ 网络异常,提交失败")})).finally((function(){t.show=!1})):alert("请先填写评论内容再尝试提交")}},mounted:function(){},components:{Comment:b},watch:{item_id:{immediate:!0,handler:function(){this.item_id&&this.get_comments()}}}};function j(t,s){var e=[];for(var a in t){var i=t[a];if(i&&i.parent_id===s){t[a]=null;var n=j(t,i.id);i.children=n||[],e.push(i)}}return e}var E=$,S=(e("99c6"),Object(u["a"])(E,_,C,!1,null,null,null)),D=S.exports,I=e("e494"),A=e("ee8f"),T=A.JX3BOX,O={name:"Detail",props:[],data:function(){return{item:{},post:null,show_relations:!1,show_relations_primary:!0}},components:{Revisions:d,Comments:D},methods:{relations_got:function(t){this.show_relations=this.$_.get(t,"length",0)>0},go_to_comment:function(){var t=document.querySelector("#m-reply-form");t.scrollIntoView(!0)},publish_url:function(t){return T.__Links.dashboard.publish+"#/"+t},get_item:function(){var t=this;this.$route.params.item_id&&this.$http({url:"".concat(T.__helperUrl,"api/item/").concat(this.$route.params.item_id),headers:{Accept:"application/prs.helper.v2+json"},withCredentials:!0}).then((function(s){s=s.data,200===s.code&&(t.item=s.data.item,t.$store.state.sidebar.AucGenre=parseInt(t.item.AucGenre),t.$store.state.sidebar.AucSubTypeID=parseInt(t.item.AucSubTypeID))})).catch((function(s){t.item=!1}))},get_item_newest_post:function(){var t=this;this.$route.params.item_id&&this.$http({url:"".concat(T.__helperUrl,"api/wiki/post"),headers:{Accept:"application/prs.helper.v2+json"},params:{type:"item",source_id:this.$route.params.item_id},withCredentials:!0}).then((function(s){t.post=s.data.data.post||{}})).catch((function(s){t.post=null}))},get_item_post:function(){var t=this;this.$route.params.post_id&&this.$http({url:"".concat(T.__helperUrl,"api/wiki/post/").concat(this.$route.params.post_id),headers:{Accept:"application/prs.helper.v2+json"},withCredentials:!0}).then((function(s){t.post=s.data.data.post||{}})).catch((function(s){t.post=null}))}},mounted:function(){Object(I["b"])(this.$route.params.item_id)},watch:{"$route.params.item_id":{immediate:!0,handler:function(){this.get_item(),this.$route.params.post_id||this.get_item_newest_post()}},"$route.params.post_id":{immediate:!0,handler:function(){}}}},M=O,U=(e("1829"),Object(u["a"])(M,a,i,!1,null,null,null));s["default"]=U.exports}}]);
//# sourceMappingURL=chunk-24402e67.53f451db.js.map