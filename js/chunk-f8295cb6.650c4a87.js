(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f8295cb6"],{1829:function(t,e,s){"use strict";var a=s("5644"),i=s.n(a);i.a},"19cb":function(t,e,s){},4127:function(t,e,s){"use strict";var a=s("d233"),i=s("b313"),n={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},r=Date.prototype.toISOString,o={delimiter:"&",encode:!0,encoder:a.encode,encodeValuesOnly:!1,serializeDate:function(t){return r.call(t)},skipNulls:!1,strictNullHandling:!1},l=function t(e,s,i,n,r,l,c,m,u,p,d,f){var _=e;if("function"===typeof c)_=c(s,_);else if(_ instanceof Date)_=p(_);else if(null===_){if(n)return l&&!f?l(s,o.encoder):s;_=""}if("string"===typeof _||"number"===typeof _||"boolean"===typeof _||a.isBuffer(_)){if(l){var v=f?s:l(s,o.encoder);return[d(v)+"="+d(l(_,o.encoder))]}return[d(s)+"="+d(String(_))]}var h,C=[];if("undefined"===typeof _)return C;if(Array.isArray(c))h=c;else{var y=Object.keys(_);h=m?y.sort(m):y}for(var b=0;b<h.length;++b){var g=h[b];r&&null===_[g]||(C=Array.isArray(_)?C.concat(t(_[g],i(s,g),i,n,r,l,c,m,u,p,d,f)):C.concat(t(_[g],s+(u?"."+g:"["+g+"]"),i,n,r,l,c,m,u,p,d,f)))}return C};t.exports=function(t,e){var s=t,r=e?a.assign({},e):{};if(null!==r.encoder&&void 0!==r.encoder&&"function"!==typeof r.encoder)throw new TypeError("Encoder has to be a function.");var c="undefined"===typeof r.delimiter?o.delimiter:r.delimiter,m="boolean"===typeof r.strictNullHandling?r.strictNullHandling:o.strictNullHandling,u="boolean"===typeof r.skipNulls?r.skipNulls:o.skipNulls,p="boolean"===typeof r.encode?r.encode:o.encode,d="function"===typeof r.encoder?r.encoder:o.encoder,f="function"===typeof r.sort?r.sort:null,_="undefined"!==typeof r.allowDots&&r.allowDots,v="function"===typeof r.serializeDate?r.serializeDate:o.serializeDate,h="boolean"===typeof r.encodeValuesOnly?r.encodeValuesOnly:o.encodeValuesOnly;if("undefined"===typeof r.format)r.format=i["default"];else if(!Object.prototype.hasOwnProperty.call(i.formatters,r.format))throw new TypeError("Unknown format option provided.");var C,y,b=i.formatters[r.format];"function"===typeof r.filter?(y=r.filter,s=y("",s)):Array.isArray(r.filter)&&(y=r.filter,C=y);var g,x=[];if("object"!==typeof s||null===s)return"";g=r.arrayFormat in n?r.arrayFormat:"indices"in r?r.indices?"indices":"repeat":"indices";var w=n[g];C||(C=Object.keys(s)),f&&C.sort(f);for(var j=0;j<C.length;++j){var P=C[j];u&&null===s[P]||(x=x.concat(l(s[P],P,w,m,u,p?d:null,y,f,_,v,b,h)))}var k=x.join(c),O=!0===r.addQueryPrefix?"?":"";return k.length>0?O+k:""}},4328:function(t,e,s){"use strict";var a=s("4127"),i=s("9e6a"),n=s("b313");t.exports={formats:n,parse:i,stringify:a}},5644:function(t,e,s){},"99c6":function(t,e,s){"use strict";var a=s("b42c"),i=s.n(a);i.a},"9e6a":function(t,e,s){"use strict";var a=s("d233"),i=Object.prototype.hasOwnProperty,n={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:a.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},r=function(t,e){for(var s={},a=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,r=e.parameterLimit===1/0?void 0:e.parameterLimit,o=a.split(e.delimiter,r),l=0;l<o.length;++l){var c,m,u=o[l],p=u.indexOf("]="),d=-1===p?u.indexOf("="):p+1;-1===d?(c=e.decoder(u,n.decoder),m=e.strictNullHandling?null:""):(c=e.decoder(u.slice(0,d),n.decoder),m=e.decoder(u.slice(d+1),n.decoder)),i.call(s,c)?s[c]=[].concat(s[c]).concat(m):s[c]=m}return s},o=function(t,e,s){for(var a=e,i=t.length-1;i>=0;--i){var n,r=t[i];if("[]"===r)n=[],n=n.concat(a);else{n=s.plainObjects?Object.create(null):{};var o="["===r.charAt(0)&&"]"===r.charAt(r.length-1)?r.slice(1,-1):r,l=parseInt(o,10);!isNaN(l)&&r!==o&&String(l)===o&&l>=0&&s.parseArrays&&l<=s.arrayLimit?(n=[],n[l]=a):n[o]=a}a=n}return a},l=function(t,e,s){if(t){var a=s.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,n=/(\[[^[\]]*])/,r=/(\[[^[\]]*])/g,l=n.exec(a),c=l?a.slice(0,l.index):a,m=[];if(c){if(!s.plainObjects&&i.call(Object.prototype,c)&&!s.allowPrototypes)return;m.push(c)}var u=0;while(null!==(l=r.exec(a))&&u<s.depth){if(u+=1,!s.plainObjects&&i.call(Object.prototype,l[1].slice(1,-1))&&!s.allowPrototypes)return;m.push(l[1])}return l&&m.push("["+a.slice(l.index)+"]"),o(m,e,s)}};t.exports=function(t,e){var s=e?a.assign({},e):{};if(null!==s.decoder&&void 0!==s.decoder&&"function"!==typeof s.decoder)throw new TypeError("Decoder has to be a function.");if(s.ignoreQueryPrefix=!0===s.ignoreQueryPrefix,s.delimiter="string"===typeof s.delimiter||a.isRegExp(s.delimiter)?s.delimiter:n.delimiter,s.depth="number"===typeof s.depth?s.depth:n.depth,s.arrayLimit="number"===typeof s.arrayLimit?s.arrayLimit:n.arrayLimit,s.parseArrays=!1!==s.parseArrays,s.decoder="function"===typeof s.decoder?s.decoder:n.decoder,s.allowDots="boolean"===typeof s.allowDots?s.allowDots:n.allowDots,s.plainObjects="boolean"===typeof s.plainObjects?s.plainObjects:n.plainObjects,s.allowPrototypes="boolean"===typeof s.allowPrototypes?s.allowPrototypes:n.allowPrototypes,s.parameterLimit="number"===typeof s.parameterLimit?s.parameterLimit:n.parameterLimit,s.strictNullHandling="boolean"===typeof s.strictNullHandling?s.strictNullHandling:n.strictNullHandling,""===t||null===t||"undefined"===typeof t)return s.plainObjects?Object.create(null):{};for(var i="string"===typeof t?r(t,s):t,o=s.plainObjects?Object.create(null):{},c=Object.keys(i),m=0;m<c.length;++m){var u=c[m],p=l(u,i[u],s);o=a.merge(o,p,s)}return a.compact(o)}},b313:function(t,e,s){"use strict";var a=String.prototype.replace,i=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return a.call(t,i,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},b42c:function(t,e,s){},c67a:function(t,e,s){"use strict";var a=s("19cb"),i=s.n(a);i.a},c84b:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"m-item-index",attrs:{id:"m-item-view"}},[t.item&&"{}"!==JSON.stringify(t.item)?s("el-row",{staticClass:"m-item"},[s("el-col",{staticClass:"m-name",attrs:{xs:24,md:3}},[s("img",{staticClass:"u-icon",attrs:{src:t.$options.filters.icon_url(t.item.IconID),title:t.$options.filters.description(t.item.Desc)}}),s("h6",{staticClass:"u-name",class:{white:1==t.item.Quality},style:{color:t.$options.filters.item_color(t.item.Quality)},domProps:{textContent:t._s(t.item.Name)}})]),s("el-col",{attrs:{xs:24,md:21}},[s("el-row",{staticClass:"m-fields"},[t.item.Desc?s("el-col",{staticClass:"m-field",attrs:{xs:24,md:24}},[s("span",{staticClass:"u-value",domProps:{innerHTML:t._s(t.$options.filters.description(t.item.Desc))}}),s("hr",{staticClass:"u-hr"})]):t._e(),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("回购价格：")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.$options.filters.item_price(t.item.Price))}})]),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("品质等级：")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.Level)}})]),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("绑定类型：")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.$options.filters.item_bind(t.item.BindType))}})]),t.item.Require1Type?s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title",domProps:{textContent:t._s(t.$options.filters.item_require_1_type(t.item.Require1Type)+"：")}}),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.Require1Value)}})]):t._e(),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("耐久度：")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.MaxDurability+"/"+t.item.MaxDurability)}})]),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("存放时间：")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.MaxExistTime)}})]),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("最大拥有数：")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.MaxExistAmount?t.item.MaxExistAmount:"无限制")}})]),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("能否交易：")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.CanTrade?"✔️":"❌")}})]),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("能否丢弃：")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.CanDestroy||null===t.item.CanDestroy?"✔️":"❌")}})]),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("品质：")]),s("span",{staticClass:"u-value",style:{color:t.$options.filters.item_color(t.item.Quality)},domProps:{textContent:t._s(t.$options.filters.item_quality(t.item.Quality))}})]),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("适用门派：")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.BelongSchool)}})]),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("心法：")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.MagicKind)}})]),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("属性：")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.MagicType)}})]),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("获得途径：")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.GetType)}})]),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("能否改色：")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.CanSetColor?"✔️":"❌")}})]),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("阵营：")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.$options.filters.item_require_camp(t.item.RequireCamp))}})]),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("能否分解：")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.CanApart?"✔️":"❌")}})]),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("能否收集：")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.CanExterior?"✔️":"❌")}})]),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("能否附魔：")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.CanChangeMagic?"✔️":"❌")}})]),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("能否共享：")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.CanShared?"✔️":"❌")}})]),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("PVE装备：")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.IsPVEEquip?"✔️":"❌")}})]),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("能否堆叠：")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.CanStack?"✔️":"❌")}})]),s("el-col",{staticClass:"m-field",attrs:{xs:12,md:8}},[s("label",{staticClass:"u-title"},[t._v("能否消耗：")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.item.CanConsume?"✔️":"❌")}})])],1)],1)],1):t._e(),t.post&&"{}"===JSON.stringify(t.post)?s("div",{staticClass:"m-cj-post-null"},[s("span",[t._v("暂无攻略，我要")]),s("a",{staticClass:"s-link",attrs:{href:t.publish_url("cj/"+t.item.ID)}},[t._v("完善攻略")])]):t._e(),t.post&&"{}"!==JSON.stringify(t.post)?s("div",{staticClass:"m-archive-list"},[s("div",{staticClass:"m-module m-cj-post"},[s("div",{staticClass:"u-head"},[s("a",{staticClass:"el-button el-button--primary u-publish s-link",attrs:{href:t.publish_url("cj/"+t.item.ID)}},[s("i",{staticClass:"el-icon-edit"}),s("span",[t._v("完善物品攻略")])]),s("h4",{staticClass:"u-title"},[s("svg",{class:"u-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"512",height:"512",viewBox:"0 0 512 512","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[s("path",{attrs:{d:"M382.5 109.2C345.1 71.8 296.3 50 243.9 47v110.9c46.7 19.2 79.6 65.2 79.6 118.7 0 58-47.2 105.2-105.2 105.2-47.8 0-86.6-38.9-86.6-86.6 0-39.6 32.2-71.8 71.8-71.8 33.1 0 59.9 26.9 59.9 59.9h-25c0-19.3-15.7-34.9-34.9-34.9-25.8 0-46.8 21-46.8 46.8 0 34 27.6 61.6 61.6 61.6 44.2 0 80.1-35.9 80.1-80.1 0-57-46.3-103.3-103.3-103.3C122.3 173.3 63 232.6 63 305.6 63 398.4 138.5 474 231.4 474c57.1 0 110.7-22.2 151.1-62.6 40.4-40.4 62.6-94 62.6-151.1s-22.2-110.7-62.6-151.1z"}})]),s("span",[t._v("物品攻略")])])]),s("div",{staticClass:"u-body"},[s("div",{staticClass:"content m-single-primary"},[s("Article",{attrs:{content:t.post.content}})],1),s("div",{staticClass:"other"},[t.post.user_avatar?s("div",{staticClass:"avatar"},[s("img",{attrs:{src:t.post.user_avatar}})]):t._e(),s("div",{staticClass:"done",domProps:{textContent:t._s(t.post.user_nickname)}}),s("div",{staticClass:"updated",domProps:{textContent:t._s("最后编辑于 "+t.$options.filters.date_format(t.post.updated))}}),s("a",{staticClass:"comment",attrs:{href:"javascript:void(0)"},domProps:{textContent:t._s("前往评论")},on:{click:t.go_to_comment}}),s("div",{staticClass:"remark"},[t._v("可通过评论通知原贡献者进行更改与署名补充")])])])]),s("div",{staticClass:"m-module m-cj-revisions"},[t._m(0),s("div",{staticClass:"u-body"},[s("Revisions",{attrs:{item_id:t.item.UiID}})],1)]),s("div",{staticClass:"m-module m-cj-comments"},[t._m(1),s("div",{staticClass:"u-body"},[s("Comments",{attrs:{item_id:t.item.UiID}})],1)])]):t._e(),s("ins",{staticClass:"adsbygoogle",staticStyle:{display:"block","max-width":"100%",overflow:"hidden",margin:"10px"},attrs:{"data-ad-client":"ca-pub-4388499329141185","data-ad-slot":"1787190081","data-ad-format":"auto","data-full-width-responsive":"true"}})],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"u-head"},[s("h4",{staticClass:"u-title"},[t._v("📄 历史版本")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"u-head"},[s("h4",{staticClass:"u-title"},[t._v("💖 评论")])])}],n=(s("99af"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"m-revisions"},[s("div",{staticStyle:{padding:"5px 0","text-align":"center"}},[null===t.versions?s("span",[t._v("Loading...")]):t._e(),!1===t.versions?s("span",[t._v("⚠️ 数据加载异常")]):t._e(),t.versions&&!t.versions.length?s("span",[t._v("💧 暂无数据")]):t._e()]),t.versions&&t.versions.length?s("table",{attrs:{id:"histories"}},[t._m(0),t._l(t.versions,(function(e,a){return s("tr",{key:a,staticClass:"history"},[s("td",[s("router-link",{attrs:{to:{name:"view",params:{item_id:e.item_id,post_id:e.id}}},domProps:{textContent:t._s("v"+(t.versions.length-a))}})],1),s("td",[t._v(t._s(t._f("date_format")(e.updated)))]),s("td",{domProps:{textContent:t._s(e.user_nickname)}}),s("td",{domProps:{textContent:t._s(e.remark)}})])}))],2):t._e()])}),r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("th",[t._v("版本")]),s("th",[t._v("更新时间")]),s("th",[t._v("贡献者")]),s("th",[t._v("修订说明")])])}],o=s("ee8f"),l=o.JX3BOX,c={name:"Revision",props:["item_id"],data:function(){return{versions:null}},computed:{},methods:{getVersions:function(){var t=this;this.$http({method:"GET",url:"".concat(l.__helperUrl,"api/wiki/post/versions"),headers:{Accept:"application/prs.helper.v2+json"},params:{type:"item",source_id:this.item_id},withCredentials:!0}).then((function(e){e=e.data,200===e.code&&(t.versions=e.data.versions)}),(function(){t.versions=!1}))}},mounted:function(){},watch:{item_id:{immediate:!0,handler:function(){this.item_id&&this.getVersions()}}}},m=c,u=(s("c67a"),s("2877")),p=Object(u["a"])(m,n,r,!1,null,null,null),d=p.exports,f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"m-comments"},[s("div",{staticStyle:{padding:"5px 0","text-align":"center"}},[null===t.comments?s("span",[t._v("Loading...")]):t._e(),!1===t.comments?s("span",[t._v("⚠️ 数据加载异常")]):t._e(),t.comments&&!t.comments.length?s("span",[t._v("💧 暂无评论")]):t._e()]),s("Comment",{attrs:{comments:t.comments,item_id:t.item_id}}),s("div",{staticClass:"m-reply-form",attrs:{id:"m-reply-form"}},[s("h4",{staticClass:"u-title"},[t._v("📰 回复")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reply_form.content,expression:"reply_form.content"}],staticClass:"u-reply-content",staticStyle:{resize:"vertical"},domProps:{value:t.reply_form.content},on:{input:function(e){e.target.composing||t.$set(t.reply_form,"content",e.target.value)}}}),s("div",{staticClass:"u-author"},[s("span",[t._v("作者 : ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.reply_form.user_nickname,expression:"reply_form.user_nickname"}],attrs:{type:"text"},domProps:{value:t.reply_form.user_nickname},on:{input:function(e){e.target.composing||t.$set(t.reply_form,"user_nickname",e.target.value)}}})]),s("button",{staticClass:"u-submit",on:{click:function(e){return t.create_comment(t.reply_form)}}},[t._v(" 📝️ 提交 ")])])],1)},_=[],v=(s("b0c0"),s("d3b7"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"comments"},t._l(t.comments,(function(e,a){return s("li",{key:a,staticClass:"c-comment"},[s("div",{staticClass:"comment"},[s("div",{staticClass:"m-nickname"},[s("span",{staticClass:"u-nickname",domProps:{textContent:t._s(e.user_nickname)}}),e.parent_id?[s("span",[t._v(" 回复 ")]),s("span",{staticClass:"u-nickname",domProps:{textContent:t._s(e.parent.user_nickname)}})]:t._e()],2),s("p",{staticClass:"u-content",domProps:{innerHTML:t._s(e.content)}}),s("div",{staticClass:"m-reply"},[s("button",{staticClass:"u-reply",class:{show:e.reply_form.show},domProps:{textContent:t._s(e.reply_form.show?"收起 ↩":"💬 回复")},on:{click:function(t){e.reply_form.show=!e.reply_form.show}}}),s("span",{staticClass:"u-time"},[t._v(t._s(t._f("date_format")(e.updated)))])]),e.reply_form.show?s("div",{staticClass:"m-reply-form"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.reply_form.content,expression:"comment.reply_form.content"}],staticClass:"u-reply-content",staticStyle:{resize:"vertical"},domProps:{value:e.reply_form.content},on:{input:function(s){s.target.composing||t.$set(e.reply_form,"content",s.target.value)}}}),s("div",{staticClass:"u-author"},[s("span",[t._v("作者 : ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.reply_form.user_nickname,expression:"comment.reply_form.user_nickname"}],attrs:{type:"text"},domProps:{value:e.reply_form.user_nickname},on:{input:function(s){s.target.composing||t.$set(e.reply_form,"user_nickname",s.target.value)}}})]),s("button",{staticClass:"u-submit",on:{click:function(s){return t.create_comment(e.reply_form,e.id)}}},[t._v(" ✔️ 提交 ")])]):t._e()]),e.children.length?s("Comment",{attrs:{comments:e.children,item_id:t.item_id}}):t._e()],1)})),0)}),h=[],C={name:"Comment",props:["comments","item_id"],methods:{create_comment:function(t,e){this.$parent.create_comment(t,e)}}},y=C,b=Object(u["a"])(y,v,h,!1,null,null,null),g=b.exports,x=s("ee8f"),w=x.JX3BOX,j=x.User,P=s("4328"),k={name:"Comments",props:["item_id"],data:function(){return{comments:null,reply_form:{content:"",user_nickname:j.getInfo().name}}},computed:{},methods:{get_comments:function(){var t=this;this.$http({method:"GET",url:"".concat(w.__helperUrl,"api/wiki/comments"),headers:{Accept:"application/prs.helper.v2+json"},params:{type:"item",source_id:this.item_id},withCredentials:!0}).then((function(e){if(e=e.data,200===e.code){for(var s=e.data.comments,a=0;a<s.length;a++)s[a]["reply_form"]={show:!1,content:"",user_nickname:j.getInfo().name};t.comments=O(s,0)}}),(function(){t.comments=!1}))},create_comment:function(t,e){"undefined"===typeof e&&(e=0),t.content?this.$http({method:"POST",url:"".concat(w.__helperUrl,"api/wiki/comment"),headers:{Accept:"application/prs.helper.v2+json"},crossDomain:!0,data:P.stringify({comment:{type:"item",source_id:this.item_id,parent_id:e,user_nickname:t.user_nickname||j.getInfo().name,content:t.content}}),withCredentials:!0}).then((function(e){e=e.data,200===e.code?(t.content="",alert("✔️ 提交成功,请等待审核")):alert("⚠️ ".concat(e.message))})).catch((function(t){alert("⚠️ 网络异常,提交失败")})).finally((function(){t.show=!1})):alert("请先填写评论内容再尝试提交")}},mounted:function(){},components:{Comment:g},watch:{item_id:{immediate:!0,handler:function(){this.item_id&&this.get_comments()}}}};function O(t,e){var s=[];for(var a in t){var i=t[a];if(i&&i.parent_id===e){t[a]=null;var n=O(t,i.id);i.children=n||[],s.push(i)}}return s}var $=k,A=(s("99c6"),Object(u["a"])($,f,_,!1,null,null,null)),D=A.exports,E=s("ee8f"),N=E.JX3BOX,S={name:"Detail",props:[],data:function(){return{item:{},post:null,show_relations:!1,show_relations_primary:!0}},components:{Revisions:d,Comments:D},methods:{relations_got:function(t){this.show_relations=this.$_.get(t,"length",0)>0},go_to_comment:function(){var t=document.querySelector("#m-reply-form");t.scrollIntoView(!0)},publish_url:function(t){return N.__Links.dashboard.publish+"#/"+t},get_item:function(){var t=this;this.$route.params.item_id&&this.$http({url:"".concat(N.__helperUrl,"api/item/").concat(this.$route.params.item_id),headers:{Accept:"application/prs.helper.v2+json"},withCredentials:!0}).then((function(e){e=e.data,200===e.code&&(t.item=e.data.item,t.$store.state.sidebar.AucGenre=parseInt(t.item.AucGenre),t.$store.state.sidebar.AucSubTypeID=parseInt(t.item.AucSubTypeID))})).catch((function(e){t.item=!1}))},get_item_newest_post:function(){var t=this;this.$route.params.item_id&&this.$http({url:"".concat(N.__helperUrl,"api/wiki/post"),headers:{Accept:"application/prs.helper.v2+json"},params:{type:"item",source_id:this.$route.params.item_id},withCredentials:!0}).then((function(e){t.post=e.data.data.post||{}})).catch((function(e){t.post=null}))},get_item_post:function(){var t=this;this.$route.params.post_id&&this.$http({url:"".concat(N.__helperUrl,"api/wiki/post/").concat(this.$route.params.post_id),headers:{Accept:"application/prs.helper.v2+json"},withCredentials:!0}).then((function(e){t.post=e.data.data.post||{}})).catch((function(e){t.post=null}))}},mounted:function(){},watch:{"$route.params.item_id":{immediate:!0,handler:function(){this.get_item(),this.$route.params.post_id||this.get_item_newest_post()}},"$route.params.post_id":{immediate:!0,handler:function(){}}}},L=S,I=(s("1829"),Object(u["a"])(L,a,i,!1,null,null,null));e["default"]=I.exports},d233:function(t,e,s){"use strict";var a=Object.prototype.hasOwnProperty,i=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),n=function(t){var e;while(t.length){var s=t.pop();if(e=s.obj[s.prop],Array.isArray(e)){for(var a=[],i=0;i<e.length;++i)"undefined"!==typeof e[i]&&a.push(e[i]);s.obj[s.prop]=a}}return e},r=function(t,e){for(var s=e&&e.plainObjects?Object.create(null):{},a=0;a<t.length;++a)"undefined"!==typeof t[a]&&(s[a]=t[a]);return s},o=function t(e,s,i){if(!s)return e;if("object"!==typeof s){if(Array.isArray(e))e.push(s);else{if("object"!==typeof e)return[e,s];(i.plainObjects||i.allowPrototypes||!a.call(Object.prototype,s))&&(e[s]=!0)}return e}if("object"!==typeof e)return[e].concat(s);var n=e;return Array.isArray(e)&&!Array.isArray(s)&&(n=r(e,i)),Array.isArray(e)&&Array.isArray(s)?(s.forEach((function(s,n){a.call(e,n)?e[n]&&"object"===typeof e[n]?e[n]=t(e[n],s,i):e.push(s):e[n]=s})),e):Object.keys(s).reduce((function(e,n){var r=s[n];return a.call(e,n)?e[n]=t(e[n],r,i):e[n]=r,e}),n)},l=function(t,e){return Object.keys(e).reduce((function(t,s){return t[s]=e[s],t}),t)},c=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},m=function(t){if(0===t.length)return t;for(var e="string"===typeof t?t:String(t),s="",a=0;a<e.length;++a){var n=e.charCodeAt(a);45===n||46===n||95===n||126===n||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122?s+=e.charAt(a):n<128?s+=i[n]:n<2048?s+=i[192|n>>6]+i[128|63&n]:n<55296||n>=57344?s+=i[224|n>>12]+i[128|n>>6&63]+i[128|63&n]:(a+=1,n=65536+((1023&n)<<10|1023&e.charCodeAt(a)),s+=i[240|n>>18]+i[128|n>>12&63]+i[128|n>>6&63]+i[128|63&n])}return s},u=function(t){for(var e=[{obj:{o:t},prop:"o"}],s=[],a=0;a<e.length;++a)for(var i=e[a],r=i.obj[i.prop],o=Object.keys(r),l=0;l<o.length;++l){var c=o[l],m=r[c];"object"===typeof m&&null!==m&&-1===s.indexOf(m)&&(e.push({obj:r,prop:c}),s.push(m))}return n(e)},p=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},d=function(t){return null!==t&&"undefined"!==typeof t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))};t.exports={arrayToObject:r,assign:l,compact:u,decode:c,encode:m,isBuffer:d,isRegExp:p,merge:o}}}]);
//# sourceMappingURL=chunk-f8295cb6.650c4a87.js.map